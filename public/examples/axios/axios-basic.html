<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/lib/prism.css" />
    <title>Axios</title>
    <script defer src="/lib/prism.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <div class="align-center" id="app">
      <h1>{{ pageTitle }}</h1>
      <p><a href="https://axios-http.com/kr/docs/intro">공식 도움말 페이지</a></p>

      <h2>Promise</h2>
      <button type="button" @click="fn1">fn1(): 눌러요</button>
      <pre><code class="language-js"><!--
        axios.get('/success-json.data')
          .then(function (response) {
            document.querySelector('#result1').innerText = JSON.stringify(response.data);
          })
          .catch(function (error) {
            console.error(error);
          })
          .then(function () {
            console.log('AJAX done')
          });
      --></code></pre>
      <div class="result"><h4>result1:</h4><p id="result1"></p></div>
      
      <h2>await</h2>
      <button type="button" @click="fn2">fn2(): 눌러요</button>
      <pre><code class="language-js"><!--
        let response = await axios.get('/success-json.data');
        document.querySelector('#result2').innerText = JSON.stringify(response.data);
      --></code></pre>
      <div class="result"><h4>result2:</h4><p id="result2"></p></div>
      
      <h2>POST 메서드</h2>
      <button type="button" @click="fn3">fn3(): 누름</button>
      <pre><code class="language-js"><!--
        let params = {
          firstName: 'Fred',
          lastName: 'Flintstone'
        };
        let response = await axios.post('/get-my-request-body.data', params);
        document.querySelector('#result3').innerText = JSON.stringify(response.data);
      --></code></pre>
      <div class="result"><h4>result3:</h4><p id="result3"></p></div>
      
      <h2>인스턴스 생성 방식</h2>
      <button type="button" @click="fn4">fn4(): push me!</button>
      <pre><code class="language-js"><!--
        const instance = axios.create({
          baseURL: '/success-json.data',
          method: 'GET',
          timeout: 1000
        });
        let response = await instance.get();
        document.querySelector('#result4').innerText = JSON.stringify(response.data);
      --></code></pre>
      <div class="result"><h4>result4:</h4><p id="result4"></p></div>
      
    </div>
    <script type="module">
      import { createApp } from '/lib/vue.esm-browser.js';
      const pageTitle = "기본 사용법";
      
      // Vue는 안봐도 됨
      createApp({
        created() {
          document.title += `: ${pageTitle}`;
        },
        data() {
          return {
            pageTitle: pageTitle,
          };
        },
        methods: {
          // Axios 기본 사용법 예시
          fn1() {
            axios.get('/success-json.data')
              .then(function (response) {
                document.querySelector('#result1').innerText = JSON.stringify(response.data);
              })
              .catch(function (error) {
                console.error(error);
              })
              .then(function () {
                console.log('AJAX done')
              });
          },
          async fn2() {
            let response = await axios.get('/success-json.data');
            document.querySelector('#result2').innerText = JSON.stringify(response.data);
          },
          async fn3() {
            let params = {
              firstName: 'Fred',
              lastName: 'Flintstone'
            };
            let response = await axios.post('/get-my-request-body.data', params);
            document.querySelector('#result3').innerText = JSON.stringify(response.data);
          },
          async fn4() {
            const instance = axios.create({
              baseURL: '/success-json.data',
              method: 'GET',
              timeout: 1000
            });
            let response = await instance.get();
            document.querySelector('#result4').innerText = JSON.stringify(response.data);
          }
        }
      }).mount("#app");
    </script>
  </body>
</html>
