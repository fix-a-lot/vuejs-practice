<!DOCTYPE html>
<html lang="ko">
  <head>
    <title>Toast UI Grid</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" type="text/css" href="/lib/tui/tui-grid.css" />
    <link rel="stylesheet" href="/lib/prism/prism.css" />
    <script src="/lib/prism/prism.js"></script>
    <script src="/lib/tui/tui-grid.js"></script>
  </head>
  <body>
    <div class="align-center" id="app" v-cloak>
      <h1>{{pageTitle}}</h1>
      <!-- <div id="grid"></div> -->
      <p>공사중</p>

      <h2>beforeExport 커스텀 이벤트</h2>
      <pre><code class="language-js"><!--
        grid.on('beforeExport', async ev => {
          ev.stop();
          let { exportFn, data, exportOptions } = ev;
          let params = {
            posNm: vm.params.posNm,
            perPage: 99999,
            page: 1
          };
          let response = await axios.get(`/execute/member/positionList?${coconut.objectToQuerystring(params)}`);
          console.log(response);
          // 기존 데이터의 컬럼 순서와 서버에서 받아 온 데이터의 컬럼 데이터 순서를 반드시 일치시켜 주어야 한다.
          let targetData = response?.data?.data?.contents;
          if (!targetData) {
            alert('서버에서 데이터를 받아올 수 없습니다.');
            return;
          }
          console.log('exportOptions:', exportOptions);
          let header = ['직무/직급명'];
          let columns = ['posNm'];
          let exportMe = [header];
          targetData.forEach((row) => {
            exportMe.push(columns.map((col) => {
              return row[col]
            }));
          })
          exportFn(exportMe);
        });
      --></code></pre>
      여기서 <code class="language-js">exportMe</code>는 2중 배열이다:
      <pre><code class="language-js"><!--
        exportMe = [
          ["직무/직급명", "등록일"],
          ["대리", "오늘"],
          ["사원", "어제"]
        ];
      --></code></pre>
    </div>
    <script type="module">
      import { createApp } from '/lib/vue/vue.esm-browser.js';
      const pageTitle = "공사중";
      createApp({
        created() {
          document.title += `: ${pageTitle}`;
        },
        data() {
          return {
            pageTitle: pageTitle
          };
        },
      }).mount("#app");

      const gridData = null;

      const grid = new tui.Grid({
        el: document.getElementById("grid"),
        data: gridData,
        scrollX: false,
        scrollY: false,
        columns: [
          {
            header: "Name",
            name: "name",
          },
          {
            header: "Artist",
            name: "artist",
          },
          {
            header: "Type",
            name: "type",
          },
          {
            header: "Release",
            name: "release",
          },
          {
            header: "Genre",
            name: "genre",
          },
        ],
      });
    </script>
  </body>
</html>
